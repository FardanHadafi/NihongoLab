import{c as I,a as o,f as j}from"../chunks/CsDiZ3u4.js";import{o as W}from"../chunks/CdbuT949.js";import{p as Y,a9 as f,a7 as Z,f as N,a as tt,q as t,a5 as a,s as i,c as r,r as s,t as P,a8 as et,ag as st}from"../chunks/IptEdv31.js";import{d as at,s as L}from"../chunks/5ZTY1J-d.js";import{i as E}from"../chunks/B_32Z2vQ.js";import{e as rt,i as lt}from"../chunks/BHhkrI38.js";import{s as it}from"../chunks/OSNHeBV3.js";import{g as nt}from"../chunks/DwxrQ85W.js";var ot=j('<p class="loading svelte-b11m4r">Loading lesson...</p>'),vt=j('<div class="result-card svelte-b11m4r"><div class="result-header svelte-b11m4r"><h2 class="result-title svelte-b11m4r">Lesson Complete !</h2></div> <div class="stats-grid svelte-b11m4r"><div class="stat-item svelte-b11m4r"><span class="stat-label svelte-b11m4r">Accuracy</span> <span class="stat-value svelte-b11m4r"> </span></div> <div class="stat-item svelte-b11m4r"><span class="stat-label svelte-b11m4r">Experience</span> <span class="stat-value xp svelte-b11m4r"> </span></div></div> <div class="result-actions svelte-b11m4r"><button class="btn-primary svelte-b11m4r">Next</button> <button class="btn-secondary svelte-b11m4r">Done</button></div></div>'),ct=j("<button> </button>"),dt=j('<div class="quiz svelte-b11m4r"><p class="quiz-progress svelte-b11m4r"> </p> <div class="quiz-character svelte-b11m4r"> </div> <div class="options-grid svelte-b11m4r"></div></div>');function xt(M,Q){Y(Q,!0);let _=f(Z([])),g=f(0),l=f(null),S=f(!1),z=f(!0),v=f(null);async function J(){a(z,!0),a(S,!1),a(g,0),a(l,null),a(v,null);const e=await fetch("/api/learn/hiragana?limit=10");a(_,await e.json(),!0),a(z,!1)}function R(){J()}W(J);let n=et(()=>t(_)[t(g)]);async function X(e){t(l)||!t(n)||(a(l,e,!0),await fetch("/api/learn/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({questionId:t(n).id,answer:e})}),setTimeout(()=>{a(l,null),st(g),t(g)>=t(_).length&&(a(S,!0),$())},700))}async function $(){const e=await fetch("/api/learn/complete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({questionIds:t(_).map(c=>c.id)})});a(v,await e.json(),!0)}var A=I(),B=N(A);{var F=e=>{var c=ot();o(e,c)},G=e=>{var c=I(),H=N(c);{var K=d=>{var m=vt(),h=i(r(m),2),x=r(h),u=i(r(x),2),y=r(u);s(u),s(x);var p=i(x,2),O=i(r(p),2),q=r(O);s(O),s(p),s(h);var T=i(h,2),w=r(T);w.__click=R;var C=i(w,2);C.__click=()=>nt("/dashboard"),s(T),s(m),P(()=>{L(y,`${t(v).correct??""} / ${t(v).total??""}`),L(q,`+${t(v).expEarned??""} XP`)}),o(d,m)},U=d=>{var m=I(),h=N(m);{var x=u=>{var y=dt(),p=r(y),O=r(p);s(p);var q=i(p,2),T=r(q,!0);s(q);var w=i(q,2);rt(w,21,()=>t(n).options,lt,(C,k)=>{var b=ct();let D;b.__click=()=>X(t(k));var V=r(b,!0);s(b),P(()=>{D=it(b,1,"option svelte-b11m4r",null,D,{correct:t(l)&&t(k)===t(n).correct,wrong:t(l)&&t(k)===t(l)&&t(k)!==t(n).correct}),b.disabled=!!t(l),L(V,t(k))}),o(C,b)}),s(w),s(y),P(()=>{L(O,`Question ${t(g)+1} / ${t(_).length??""}`),L(T,t(n).character)}),o(u,y)};E(h,u=>{t(n)&&u(x)},!0)}o(d,m)};E(H,d=>{t(S)&&t(v)?d(K):d(U,!1)},!0)}o(e,c)};E(B,e=>{t(z)?e(F):e(G,!1)})}o(M,A),tt()}at(["click"]);export{xt as component};
