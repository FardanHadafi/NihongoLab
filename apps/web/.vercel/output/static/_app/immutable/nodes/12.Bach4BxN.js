import{c as I,a as o,f as T}from"../chunks/CsDiZ3u4.js";import{o as W}from"../chunks/CdbuT949.js";import{p as Y,a9 as m,a7 as Z,f as N,a as tt,q as t,a5 as a,s as i,c as r,r as s,t as P,a8 as et,ag as st}from"../chunks/IptEdv31.js";import{d as at,s as w}from"../chunks/5ZTY1J-d.js";import{i as E}from"../chunks/B_32Z2vQ.js";import{e as rt,i as lt}from"../chunks/BHhkrI38.js";import{s as it}from"../chunks/OSNHeBV3.js";import{g as nt}from"../chunks/DwxrQ85W.js";var ot=T('<p class="loading svelte-13phuj4">Loading lesson...</p>'),vt=T('<div class="result-card svelte-13phuj4"><div class="result-header svelte-13phuj4"><h2 class="result-title svelte-13phuj4">Lesson Complete !</h2></div> <div class="stats-grid svelte-13phuj4"><div class="stat-item svelte-13phuj4"><span class="stat-label svelte-13phuj4">Accuracy</span> <span class="stat-value svelte-13phuj4"> </span></div> <div class="stat-item svelte-13phuj4"><span class="stat-label svelte-13phuj4">Experience</span> <span class="stat-value xp svelte-13phuj4"> </span></div></div> <div class="result-actions svelte-13phuj4"><button class="btn-primary svelte-13phuj4">Next</button> <button class="btn-secondary svelte-13phuj4">Done</button></div></div>'),ct=T("<button> </button>"),ut=T('<div class="quiz svelte-13phuj4"><p class="quiz-progress svelte-13phuj4"> </p> <div class="quiz-character svelte-13phuj4"> </div> <div class="options-grid svelte-13phuj4"></div></div>');function bt(M,Q){Y(Q,!0);let _=m(Z([])),j=m(0),l=m(null),S=m(!1),z=m(!0),v=m(null);async function J(){a(z,!0),a(S,!1),a(j,0),a(l,null),a(v,null);const e=await fetch("/api/learn/katakana?limit=10");a(_,await e.json(),!0),a(z,!1)}function R(){J()}W(J);let n=et(()=>t(_)[t(j)]);async function X(e){t(l)||!t(n)||(a(l,e,!0),await fetch("/api/learn/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({questionId:t(n).id,answer:e})}),setTimeout(()=>{a(l,null),st(j),t(j)>=t(_).length&&(a(S,!0),$())},700))}async function $(){const e=await fetch("/api/learn/complete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({questionIds:t(_).map(c=>c.id)})});a(v,await e.json(),!0)}var A=I(),B=N(A);{var F=e=>{var c=ot();o(e,c)},G=e=>{var c=I(),H=N(c);{var K=u=>{var p=vt(),g=i(r(p),2),b=r(g),d=i(r(b),2),x=r(d);s(d),s(b);var h=i(b,2),L=i(r(h),2),y=r(L);s(L),s(h),s(g);var O=i(g,2),k=r(O);k.__click=R;var C=i(k,2);C.__click=()=>nt("/dashboard"),s(O),s(p),P(()=>{w(x,`${t(v).correct??""} / ${t(v).total??""}`),w(y,`+${t(v).expEarned??""} XP`)}),o(u,p)},U=u=>{var p=I(),g=N(p);{var b=d=>{var x=ut(),h=r(x),L=r(h);s(h);var y=i(h,2),O=r(y,!0);s(y);var k=i(y,2);rt(k,21,()=>t(n).options,lt,(C,q)=>{var f=ct();let D;f.__click=()=>X(t(q));var V=r(f,!0);s(f),P(()=>{D=it(f,1,"option svelte-13phuj4",null,D,{correct:t(l)&&t(q)===t(n).correct,wrong:t(l)&&t(q)===t(l)&&t(q)!==t(n).correct}),f.disabled=!!t(l),w(V,t(q))}),o(C,f)}),s(k),s(x),P(()=>{w(L,`Question ${t(j)+1} / ${t(_).length??""}`),w(O,t(n).character)}),o(d,x)};E(g,d=>{t(n)&&d(b)},!0)}o(u,p)};E(H,u=>{t(S)&&t(v)?u(K):u(U,!1)},!0)}o(e,c)};E(B,e=>{t(z)?e(F):e(G,!1)})}o(M,A),tt()}at(["click"]);export{bt as component};
